---
# Preamble

## Author
author:
  name: Верниковская Екатерина Адреевна
  degrees: DSc
  email: 11322361366@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6

## Title
title: Отчёт по лабораторной работе №1
subtitle: Администрирование сетевых подсистем
license: CC BY
date: 2025-5-09

## Generic options
lang: ru-RU
crossref:
  lof-title: Список иллюстраций
  lot-title: Список таблиц
  lol-title: Листинги

## Fonts 
mainfont: PT Serif 
romanfont: PT Serif 
sansfont: PT Sans 
monofont: PT Mono 
mainfontoptions: Ligatures=TeX 
romanfontoptions: Ligatures=TeX 
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase 
monofontoptions: Scale=MatchLowercase,Scale=0.9

## Formats
format:
### Pdf output format
  beamer:
    toc: true
    toc-title: Содержание
    number-sections: true
    colorlinks: false
    toc-depth: 2
    slide_level: 2
    aspectratio: 169
    section-titles: true
    theme: metropolis
    themeoptions: progressbar=frametitle,sectionpage=progressbar,numbering=fraction
    pdf-engine: xelatex
    fontenc: T2A
#### Language
    babel-lang: russian
    babel-otherlangs: english

### Html output
  revealjs:
    transition: slide
    margin: 0.2
    smaller: false
    output-ext: html
    theme: beige
    logo: _resources/image/logo_rudn.png
---

# Вводная часть

## Цель работы

Целью данной работы является приобретение практических навыков установки Rocky Linux на виртуальную машину с помощью инструмента Vagrant.

## Задание

1. Сформировать box-файл с дистрибутивом Rocky Linux для VirtualBox
2. Запустить виртуальные машины сервера и клиента и убедиться в их работоспособности
3. Внести изменения в настройки загрузки образов виртуальных машин server
и client, добавив пользователя с правами администратора и изменив названия хостов 
4. Скопировать необходимые для работы с Vagrant файлы и box-файлы виртуальных машин на внешний носитель. Используя эти файлы, мы можем попробовать развернуть виртуальные машины на другом компьютере.

# Выполнение лабораторной работы

## Подготовка рабочего каталога

Подготовка лабораторного стенда проводилась в OC Linux.

Перед началом лабораторной работы был создан каталог */var/tmp/eavernikovskaya* ([рис. @fig-001])

![Структура рабочего каталога](image/лаба1_1.png){#fig-001 width=30%}

## Подготовка рабочего каталога

Также сделали несколько изменений в файлах *vagrant/default/01-user.sh* и *vagrant/default/01-hostname.sh* ([рис. @fig-002]), ([рис. @fig-003])

![Редактрование файла 01-user.sh](image/лаба1_2.png){#fig-002 width=70%}

## Подготовка рабочего каталога

![Редактрование файла 01-hostname.sh](image/лаба1_3.png){#fig-003 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Далее перешли в каталог c проектом: ```cd /var/tmp/eavernikovskaya/packer```. И псмотрели перечень целей в Makefile: ```makе help``` ([рис. @fig-004])

![Переход в каталог packer и перечень целей](image/лаба1_4.png){#fig-004 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Для формирования box-файла с дистрибутивом Rocky Linux для VirtualBox в терминале набрали ```make init``` и ```make virtualbox```. Начнётся процесс скачивания, распаковки и установки драйверов VirtualBox и дистрибутива ОС на виртуальную машину ([рис. @fig-005]), ([рис. @fig-006])

![Команда make init](image/лаба1_5.png){#fig-005 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

![Команда make virtualbox](image/лаба1_6.png){#fig-006 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

После завершения в каталоге packer сформировался образ *vagrant-virtualbox-rockylinux10-x86_64.box* ([рис. @fig-007])

![Сформировавшийся box-файл](image/лаба1_7.png){#fig-007 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Скопировали box-файл в подкаталог *vagrant* ([рис. @fig-008])

![Копирование box-файла](image/лаба1_8.png){#fig-008 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Для регистрации образа виртуальной машины в Vagrant в терминале в каталоге /var/tmp/eavernikovskaya/vagrant набрали ```make addbox``` ([рис. @fig-009])

![Регистрация браза в Vagrant](image/лаба1_9.png){#fig-009 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Далее запустили виртуальную машину Server, введя ```make server-up``` ([рис. @fig-010])

![Запуск виртуальной машины server](image/лаба1_10.png){#fig-010 width=50%}

## Развёртывание лабораторного стенда на ОС Linux

Далее запустили виртуальную машину Client, введя ```make client-up``` ([рис. @fig-011])

![Запуск виртуальной машины client](image/лаба1_11.png){#fig-011 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Появились две виртуальные машины - server и client ([рис. @fig-012])

![Виртуальные машины server и client](image/лаба1_12.png){#fig-012 width=60%}

## Развёртывание лабораторного стенда на ОС Linux

После подключились к серверу из консоли: ```vagrant ssh server```. Ввели пароль vagrant. Далее перешли к пользователю eavernikovskaya: ```su - eavernikovskaya```. Также ввели пароль, а затем отлогинились ([рис. @fig-013])

![Подключение к серверу из консоли](image/лаба1_13.png){#fig-013 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Далее проделали тоже самое для клиента ([рис. @fig-014])

![Подключение к клиенту из консоли](image/лаба1_14.png){#fig-014 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

После выключили обе виртуальные машины с помощью ```make server-halt``` и ```make client-halt``` ([рис. @fig-015])

![Выключение виртуальных машин](image/лаба1_15.png){#fig-015 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

Далее убедились, что запуск обеих виртуальных машин прошёл успешно. Залогинились под пользователем vagrant с паролем vagrant в графическом окружении ([рис. @fig-016]), ([рис. @fig-017])

![Работа в графическом окружении сервера](image/лаба1_16.png){#fig-016 width=70%}

## Развёртывание лабораторного стенда на ОС Linux

![Работа в графическом окружении клиента](image/лаба1_17.png){#fig-017 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

Проверили что в файле Vagrantfile есть следующая запись ([рис. @fig-018])

![Файл Vagrantfile](image/лаба1_18.png){#fig-018 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

Далее зафиксировали внесённые изменения для внутренних настроек виртуальных машин, введя в терминале ```make server-provision```, затем ```make client-provision``` ([рис. @fig-019]), ([рис. @fig-020])

![Фиксирование изменений настроек сервера](image/лаба1_19.png){#fig-019 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

![Фиксирование изменений настроек клиента](image/лаба1_20.png){#fig-020 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

После залогинились на сервере и клиенте под созданным пользователем. Убедилиcь,что в терминале приглашение отображается в виде eavernikovskaya@server.eavernikovskaya.net на сервере и в виде eavernikovskaya@client.eavernikovskaya.net на клиенте ([рис. @fig-021]), ([рис. @fig-022])

![Проверка отображения приглашения на сервере](image/лаба1_21.png){#fig-021 width=70%}

## Внесение изменений в настройки внутреннего окружения виртуальной машины

![Проверка отображения приглашения на клиенте](image/лаба1_22.png){#fig-022 width=70%}

# Подведение итогов

## Выводы

В ходе выполнения лабораторной работы №1 мы приобрели практические навыки установки Rocky Linux на виртуальную машину с помощью инструмента Vagrant.

## Список литературы

1. [Лаборатораня работа №1](https://esystem.rudn.ru/pluginfile.php/2854725/mod_resource/content/11/001-vagrant.pdf)
2. [VirtualBox](https://www.virtualbox.org/)
3. [Vagrant](https://developer.hashicorp.com/vagrant)
4. [Packer](https://developer.hashicorp.com/packer)
